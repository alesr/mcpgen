// Code generated by mcpgen. Edit if needed.
package handlers

import (
	"context"
	"testing"

	"github.com/modelcontextprotocol/go-sdk/mcp"
)

// TestHandlers_Tools validates stub tool handlers.
func TestHandlers_Tools(t *testing.T) {
	h := New(nil)
	tests := []struct {
		name    string
		handler func(context.Context, *mcp.CallToolRequest) (*mcp.CallToolResult, error)
	}{
{{- range .Tools }}
		{ name: {{ quote .ID }}, handler: h.Handle{{ .GoName }} },
{{- end }}
	}

	for _, tt := range tests {
		tt := tt
		t.Run(tt.name, func(t *testing.T) {
			t.Parallel()
			res, err := tt.handler(context.Background(), &mcp.CallToolRequest{Params: &mcp.CallToolParamsRaw{Name: tt.name}})
			if err != nil {
				t.Fatalf("unexpected error: %v", err)
			}
			if res == nil {
				t.Fatalf("expected result")
			}
			if res.StructuredContent == nil {
				t.Fatalf("expected structured content")
			}
			switch v := res.StructuredContent.(type) {
			case []byte:
				if len(v) == 0 {
					t.Fatalf("expected structured content bytes")
				}
			case string:
				if v == "" {
					t.Fatalf("expected structured content string")
				}
			}
			if len(res.Content) == 0 {
				t.Fatalf("expected content")
			}
			text, _ := res.Content[0].(*mcp.TextContent)
			if text == nil || text.Text == "" {
				t.Fatalf("expected text content")
			}
		})
	}
}
